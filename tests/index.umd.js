!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function e(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=f(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function p(t,e){return t(e={exports:{}},e.exports),e.exports}var y="object"==typeof d&&d&&d.Object===Object&&d,g="object"==typeof self&&self&&self.Object===Object&&self,b=y||g||Function("return this")(),m=b.Symbol,x=Object.prototype,w=x.hasOwnProperty,O=x.toString,M=m?m.toStringTag:void 0;var _=function(t){var e=w.call(t,M),n=t[M];try{t[M]=void 0;var i=!0}catch(t){}var r=O.call(t);return i&&(e?t[M]=n:delete t[M]),r},P=Object.prototype.toString;var k=function(t){return P.call(t)},E=m?m.toStringTag:void 0;var D=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":E&&E in Object(t)?_(t):k(t)},j=Array.isArray;var S=function(t){return null!=t&&"object"==typeof t};var T=function(t){return"string"==typeof t||!j(t)&&S(t)&&"[object String]"==D(t)},B="0.0.1";var C=function(t){return void 0===t},R="ICE_FRAME_EVENT",N="BEFORE_RENDER",A="AFTER_RENDER",I={linear:function(t,e,n,i){return t+(e-t)/n*(Date.now()-i)},easeInQuad:function(t,e,n,i){var r=Date.now()-i;return t+(e-t)/n*(r/n)*r}},z=function(){function t(e){n(this,t),o(this,"animationMap",new Map),o(this,"ice",void 0),this.ice=e}return r(t,[{key:"start",value:function(){var t=this;return this.ice.evtBus.on(R,(function(e){t.animationMap.forEach((function(e){e.state.interactive=!1,t.tween(e),e.state.interactive=!0}))})),this}},{key:"tween",value:function(t){var n={},i=t.props.animations,r=1;for(var o in i){var a=i[o];if(a.finished){if(++r===Object.keys(i).length){this.remove(t);break}}else{var s=a.from,c=a.to,u=a.duration;C(a.startTime)&&(a.startTime=Date.now()),C(a.easing)&&(a.easing="linear");var l=I[a.easing](s,c,u,a.startTime);l>c&&(l=c,a.finished=!0),n[o]=Math.floor(l)}}return t.setState(e({},n)),t}},{key:"add",value:function(t){this.animationMap.set(t.props.id,t)}},{key:"remove",value:function(t){T(t)?this.animationMap.delete(t):this.animationMap.delete(t.props.id)}},{key:"stop",value:function(){}}]),t}(),H=window||global,L={evtBuses:[],frameCallback:function(){L.evtBuses.forEach((function(t){t.trigger(R)})),H.requestAnimationFrame(L.frameCallback)},start:function(){H.requestAnimationFrame(L.frameCallback)},stop:function(){},pause:function(){},resume:function(){},regitserEvtBus:function(t){L.evtBuses.includes(t)||L.evtBuses.push(t)},delEvtBus:function(t){L.evtBuses.includes(t)&&L.evtBuses.splice(L.evtBuses.indexOf(t),1)}},F=function(){function t(e){n(this,t),o(this,"ice",void 0),this.ice=e}return r(t,[{key:"start",value:function(){var t=this;function n(n){t.ice.selectionList.forEach((function(t){var i=n.movementX/window.devicePixelRatio,r=n.movementY/window.devicePixelRatio;if(t.parentNode){var o=new DOMPoint(i,r),a=t.state.absoluteLinearMatrix;a=a.inverse(),i=(o=o.matrixTransform(a)).x,r=o.y}t.trigger("before-move",e(e({},n),{},{tx:i,ty:r})),t.movePosition(i,r),t.trigger("after-move",e(e({},n),{},{tx:i,ty:r}))}))}function i(e){t.ice.evtBus.off("mousemove",n),t.ice.evtBus.off("mouseup",i)}return this.ice.evtBus.on("mousedown",(function(e){t.ice.evtBus.on("mousemove",n),t.ice.evtBus.on("mouseup",i)})),this}},{key:"stop",value:function(){}}]),t}(),U=[["click","ICE_CLICK"],["dbclick","ICE_DBCLICK"],["mousedown","ICE_MOUSEDOWN"],["mouseup","ICE_MOUSEUP"],["mousemove","ICE_MOUSEMOVE"],["mouseenter","ICE_MOUSEENTER"],["mouseleave","ICE_MOUSELEAVE"],["mouseout","ICE_MOUSEOUT"],["mouseover","ICE_MOUSEOVER"],["contextmenu","ICE_CONTEXTMENU"],["mousewheel","ICE_MOUSEWHEEL"]],Y=function(){function t(e){n(this,t),o(this,"selectionCandidates",[]),o(this,"ice",void 0),this.ice=e}return r(t,[{key:"start",value:function(){var t=this;return U.forEach((function(e){t.ice.evtBus.on(e[1],(function(n){var i=t.findTargetElement(n.clientX,n.clientY);i&&(n.target=i,i.trigger(e[0],n)),t.ice.evtBus.trigger(e[0],n)}))})),this.ice.evtBus.on("mousedown",(function(e){var n=e.target;console.log(n),n.state.interactive&&(e.ctrlKey?t.ice.selectionList.push(n):t.ice.selectionList=[n])})),this}},{key:"findTargetElement",value:function(t,e){for(var n=t-this.ice.canvasBoundingClientRect.left,i=e-this.ice.canvasBoundingClientRect.top,r=Array.from(this.ice.renderMap.values()),o=0;o<r.length;o++){var a=r[o];this.traverse(n,i,a)}this.selectionCandidates.sort((function(t,e){return t.zIndex-e.zIndex}));var s=this.selectionCandidates[0];return this.selectionCandidates=[],s}},{key:"traverse",value:function(t,e,n){var i=this;n.childNodes&&n.childNodes.length&&n.childNodes.forEach((function(n){i.traverse(t,e,n)})),n.getMinBoundingBox().containsPoint(new DOMPoint(t,e))&&n.state.interactive&&this.selectionCandidates.push(n)}}]),t}(),X=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var i in n(this,t),o(this,"originalEvent",void 0),o(this,"target",void 0),e)this[i]=e[i]},W=function(){function t(){n(this,t),o(this,"listeners",{}),o(this,"suspendedEventNames",[])}return r(t,[{key:"on",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.off(t,e),this.listeners[t].push(e)}},{key:"off",value:function(t,e){return!!this.listeners[t]&&(e||(this.listeners[t]=[]),!!this.listeners[t].includes(e)&&(this.listeners[t].splice(this.listeners[t].indexOf(e),1),!0))}},{key:"once",value:function(t,e){var n=this;this.on(t,(function(i){n.off(t,e),e(i)}))}},{key:"trigger",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!!this.listeners[t]&&(!this.suspendedEventNames.includes(t)&&(n?(e=new X(n)).originalEvent=n:e=new X({type:t,timeStamp:(new Date).getTime()}),this.listeners[t].forEach((function(t){t(e)})),!0))}},{key:"suspend",value:function(t,e){t&&!this.suspendedEventNames.includes(t)&&this.suspendedEventNames.push(t),e&&(e.prototype.suspended=!0)}},{key:"resume",value:function(t,e){t&&this.suspendedEventNames.includes(t)&&this.suspendedEventNames.splice(this.suspendedEventNames.findIndex(t),1),e&&(e.prototype.suspended=!1)}},{key:"purge",value:function(){this.listeners={}}}]),t}();W.prototype.addEventListener=W.prototype.on,W.prototype.removeEventListener=W.prototype.off,W.prototype.dispatchEvent=W.prototype.trigger;var $=function(t){a(i,t);var e=h(i);function i(){return n(this,i),e.call(this)}return i}(W),q={evtBuses:[],start:function(){H&&H.document&&H.document.addEventListener&&q.evtBuses.forEach((function(t){U.forEach((function(e){H.document.addEventListener(e[0],(function(n){t.trigger(e[1],n)}))}))}))},regitserEvtBus:function(t){q.evtBuses.includes(t)||q.evtBuses.push(t)},delEvtBus:function(t){q.evtBuses.includes(t)&&q.evtBuses.splice(q.evtBuses.indexOf(t),1)}},J=function(){function t(e){n(this,t),o(this,"ice",void 0),this.ice=e}return r(t,[{key:"start",value:function(){var t=this;return this.ice.evtBus.on(R,(function(e){t.ice.ctx.clearRect(0,0,t.ice.canvasWidth,t.ice.canvasHeight),t.ice.renderMap&&t.ice.renderMap.size&&t.ice.renderMap.forEach((function(t){!t.isRendering&&t.render()}))})),this}},{key:"stop",value:function(){throw new Error("Method not implemented.")}}]),t}(),V=function(){function t(e){n(this,t),o(this,"ice",void 0),this.ice=e}return r(t,[{key:"start",value:function(){var t=this;function e(n){t.ice.evtBus.off("mouseup",e),console.log("TransformManager mouseup...")}return t.ice.evtBus.on("mousedown",(function(n){t.ice.evtBus.on("mouseup",e)})),this}},{key:"stop",value:function(){}}]),t}();L.start();var K=function(){function t(){n(this,t),o(this,"version",B),o(this,"renderMap",new Map),o(this,"evtBus",void 0),o(this,"root",void 0),o(this,"ctx",void 0),o(this,"canvasEl",void 0),o(this,"canvasWidth",0),o(this,"canvasHeight",0),o(this,"canvasBoundingClientRect",void 0),o(this,"selectionList",[]),o(this,"animationManager",void 0),o(this,"eventBridge",void 0),o(this,"ddManager",void 0),o(this,"transformManager",void 0),o(this,"renderer",void 0)}return r(t,[{key:"init",value:function(t){if(!t)throw new Error("init() failed...");if(this.ctx===t)throw new Error("同一个 canvas 实例只能 init 一次...");return this.root=H,T(t)?(this.canvasEl=this.root.document.getElementById(t),this.canvasEl.oncontextmenu=function(t){t.preventDefault(),t.stopPropagation()},this.canvasWidth=this.canvasEl.width,this.canvasHeight=this.canvasEl.height,this.canvasBoundingClientRect=this.canvasEl.getBoundingClientRect(),this.ctx=this.canvasEl.getContext("2d")):this.ctx=t,this.evtBus=new $,L.regitserEvtBus(this.evtBus),q.regitserEvtBus(this.evtBus),q.start(),this.animationManager=new z(this).start(),this.eventBridge=new Y(this).start(),this.ddManager=new F(this).start(),this.transformManager=new V(this).start(),this.renderer=new J(this).start(),this}},{key:"destory",value:function(){}},{key:"addToRenderMap",value:function(t){t.ctx=this.ctx,t.root=this.root,this.renderMap.set(t.props.id,t),Object.keys(t.props.animations).length&&this.animationManager.add(t)}},{key:"removeFromRenderMap",value:function(t){t.ctx=null,t.root=null}},{key:"clearRenderMap",value:function(){}},{key:"toJSON",value:function(){return"{}"}},{key:"fromJSON",value:function(t){return{}}}]),t}();var G=function(t){return"symbol"==typeof t||S(t)&&"[object Symbol]"==D(t)},Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/;var tt=function(t,e){if(j(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!G(t))||(Z.test(t)||!Q.test(t)||null!=e&&t in Object(e))};var et=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var nt,it=function(t){if(!et(t))return!1;var e=D(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},rt=b["__core-js_shared__"],ot=(nt=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||""))?"Symbol(src)_1."+nt:"";var at=function(t){return!!ot&&ot in t},st=Function.prototype.toString;var ct=function(t){if(null!=t){try{return st.call(t)}catch(t){}try{return t+""}catch(t){}}return""},ut=/^\[object .+?Constructor\]$/,lt=Function.prototype,ht=Object.prototype,ft=lt.toString,vt=ht.hasOwnProperty,dt=RegExp("^"+ft.call(vt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var pt=function(t){return!(!et(t)||at(t))&&(it(t)?dt:ut).test(ct(t))};var yt=function(t,e){return null==t?void 0:t[e]};var gt=function(t,e){var n=yt(t,e);return pt(n)?n:void 0},bt=gt(Object,"create");var mt=function(){this.__data__=bt?bt(null):{},this.size=0};var xt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},wt=Object.prototype.hasOwnProperty;var Ot=function(t){var e=this.__data__;if(bt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return wt.call(e,t)?e[t]:void 0},Mt=Object.prototype.hasOwnProperty;var _t=function(t){var e=this.__data__;return bt?void 0!==e[t]:Mt.call(e,t)};var Pt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=bt&&void 0===e?"__lodash_hash_undefined__":e,this};function kt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}kt.prototype.clear=mt,kt.prototype.delete=xt,kt.prototype.get=Ot,kt.prototype.has=_t,kt.prototype.set=Pt;var Et=kt;var Dt=function(){this.__data__=[],this.size=0};var jt=function(t,e){return t===e||t!=t&&e!=e};var St=function(t,e){for(var n=t.length;n--;)if(jt(t[n][0],e))return n;return-1},Tt=Array.prototype.splice;var Bt=function(t){var e=this.__data__,n=St(e,t);return!(n<0)&&(n==e.length-1?e.pop():Tt.call(e,n,1),--this.size,!0)};var Ct=function(t){var e=this.__data__,n=St(e,t);return n<0?void 0:e[n][1]};var Rt=function(t){return St(this.__data__,t)>-1};var Nt=function(t,e){var n=this.__data__,i=St(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};function At(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}At.prototype.clear=Dt,At.prototype.delete=Bt,At.prototype.get=Ct,At.prototype.has=Rt,At.prototype.set=Nt;var It=At,zt=gt(b,"Map");var Ht=function(){this.size=0,this.__data__={hash:new Et,map:new(zt||It),string:new Et}};var Lt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Ft=function(t,e){var n=t.__data__;return Lt(e)?n["string"==typeof e?"string":"hash"]:n.map};var Ut=function(t){var e=Ft(this,t).delete(t);return this.size-=e?1:0,e};var Yt=function(t){return Ft(this,t).get(t)};var Xt=function(t){return Ft(this,t).has(t)};var Wt=function(t,e){var n=Ft(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function $t(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}$t.prototype.clear=Ht,$t.prototype.delete=Ut,$t.prototype.get=Yt,$t.prototype.has=Xt,$t.prototype.set=Wt;var qt=$t;function Jt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Jt.Cache||qt),n}Jt.Cache=qt;var Vt=Jt;var Kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gt=/\\(\\)?/g,Qt=function(t){var e=Vt(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Kt,(function(t,n,i,r){e.push(i?r.replace(Gt,"$1"):n||t)})),e}));var Zt=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r},te=m?m.prototype:void 0,ee=te?te.toString:void 0;var ne=function t(e){if("string"==typeof e)return e;if(j(e))return Zt(e,t)+"";if(G(e))return ee?ee.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n};var ie=function(t){return null==t?"":ne(t)};var re=function(t,e){return j(t)?t:tt(t,e)?[t]:Qt(ie(t))};var oe=function(t){if("string"==typeof t||G(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var ae=function(t,e){for(var n=0,i=(e=re(e,t)).length;null!=t&&n<i;)t=t[oe(e[n++])];return n&&n==i?t:void 0};var se=function(t,e,n){var i=null==t?void 0:ae(t,e);return void 0===i?n:i};var ce=function(){this.__data__=new It,this.size=0};var ue=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var le=function(t){return this.__data__.get(t)};var he=function(t){return this.__data__.has(t)};var fe=function(t,e){var n=this.__data__;if(n instanceof It){var i=n.__data__;if(!zt||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new qt(i)}return n.set(t,e),this.size=n.size,this};function ve(t){var e=this.__data__=new It(t);this.size=e.size}ve.prototype.clear=ce,ve.prototype.delete=ue,ve.prototype.get=le,ve.prototype.has=he,ve.prototype.set=fe;var de=ve,pe=function(){try{var t=gt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var ye=function(t,e,n){"__proto__"==e&&pe?pe(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var ge=function(t,e,n){(void 0!==n&&!jt(t[e],n)||void 0===n&&!(e in t))&&ye(t,e,n)};var be=function(t){return function(e,n,i){for(var r=-1,o=Object(e),a=i(e),s=a.length;s--;){var c=a[t?s:++r];if(!1===n(o[c],c,o))break}return e}}(),me=p((function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n?b.Buffer:void 0,o=r?r.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=o?o(n):new t.constructor(n);return t.copy(i),i}})),xe=b.Uint8Array;var we=function(t){var e=new t.constructor(t.byteLength);return new xe(e).set(new xe(t)),e};var Oe=function(t,e){var n=e?we(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Me=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e},_e=Object.create,Pe=function(){function t(){}return function(e){if(!et(e))return{};if(_e)return _e(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var ke=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),Ee=Object.prototype;var De=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ee)};var je=function(t){return"function"!=typeof t.constructor||De(t)?{}:Pe(ke(t))};var Se=function(t){return S(t)&&"[object Arguments]"==D(t)},Te=Object.prototype,Be=Te.hasOwnProperty,Ce=Te.propertyIsEnumerable,Re=Se(function(){return arguments}())?Se:function(t){return S(t)&&Be.call(t,"callee")&&!Ce.call(t,"callee")};var Ne=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Ae=function(t){return null!=t&&Ne(t.length)&&!it(t)};var Ie=function(t){return S(t)&&Ae(t)};var ze=function(){return!1},He=p((function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n?b.Buffer:void 0,o=(r?r.isBuffer:void 0)||ze;t.exports=o})),Le=Function.prototype,Fe=Object.prototype,Ue=Le.toString,Ye=Fe.hasOwnProperty,Xe=Ue.call(Object);var We=function(t){if(!S(t)||"[object Object]"!=D(t))return!1;var e=ke(t);if(null===e)return!0;var n=Ye.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ue.call(n)==Xe},$e={};$e["[object Float32Array]"]=$e["[object Float64Array]"]=$e["[object Int8Array]"]=$e["[object Int16Array]"]=$e["[object Int32Array]"]=$e["[object Uint8Array]"]=$e["[object Uint8ClampedArray]"]=$e["[object Uint16Array]"]=$e["[object Uint32Array]"]=!0,$e["[object Arguments]"]=$e["[object Array]"]=$e["[object ArrayBuffer]"]=$e["[object Boolean]"]=$e["[object DataView]"]=$e["[object Date]"]=$e["[object Error]"]=$e["[object Function]"]=$e["[object Map]"]=$e["[object Number]"]=$e["[object Object]"]=$e["[object RegExp]"]=$e["[object Set]"]=$e["[object String]"]=$e["[object WeakMap]"]=!1;var qe=function(t){return S(t)&&Ne(t.length)&&!!$e[D(t)]};var Je=function(t){return function(e){return t(e)}},Ve=p((function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n&&y.process,o=function(){try{var t=i&&i.require&&i.require("util").types;return t||r&&r.binding&&r.binding("util")}catch(t){}}();t.exports=o})),Ke=Ve&&Ve.isTypedArray,Ge=Ke?Je(Ke):qe;var Qe=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},Ze=Object.prototype.hasOwnProperty;var tn=function(t,e,n){var i=t[e];Ze.call(t,e)&&jt(i,n)&&(void 0!==n||e in t)||ye(t,e,n)};var en=function(t,e,n,i){var r=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],c=i?i(n[s],t[s],s,n,t):void 0;void 0===c&&(c=t[s]),r?ye(n,s,c):tn(n,s,c)}return n};var nn=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i},rn=/^(?:0|[1-9]\d*)$/;var on=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&rn.test(t))&&t>-1&&t%1==0&&t<e},an=Object.prototype.hasOwnProperty;var sn=function(t,e){var n=j(t),i=!n&&Re(t),r=!n&&!i&&He(t),o=!n&&!i&&!r&&Ge(t),a=n||i||r||o,s=a?nn(t.length,String):[],c=s.length;for(var u in t)!e&&!an.call(t,u)||a&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||on(u,c))||s.push(u);return s};var cn=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},un=Object.prototype.hasOwnProperty;var ln=function(t){if(!et(t))return cn(t);var e=De(t),n=[];for(var i in t)("constructor"!=i||!e&&un.call(t,i))&&n.push(i);return n};var hn=function(t){return Ae(t)?sn(t,!0):ln(t)};var fn=function(t){return en(t,hn(t))};var vn=function(t,e,n,i,r,o,a){var s=Qe(t,n),c=Qe(e,n),u=a.get(c);if(u)ge(t,n,u);else{var l=o?o(s,c,n+"",t,e,a):void 0,h=void 0===l;if(h){var f=j(c),v=!f&&He(c),d=!f&&!v&&Ge(c);l=c,f||v||d?j(s)?l=s:Ie(s)?l=Me(s):v?(h=!1,l=me(c,!0)):d?(h=!1,l=Oe(c,!0)):l=[]:We(c)||Re(c)?(l=s,Re(s)?l=fn(s):et(s)&&!it(s)||(l=je(c))):h=!1}h&&(a.set(c,l),r(l,c,i,o,a),a.delete(c)),ge(t,n,l)}};var dn=function t(e,n,i,r,o){e!==n&&be(n,(function(a,s){if(o||(o=new de),et(a))vn(e,n,s,i,t,r,o);else{var c=r?r(Qe(e,s),a,s+"",e,n,o):void 0;void 0===c&&(c=a),ge(e,s,c)}}),hn)};var pn=function(t){return t};var yn=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},gn=Math.max;var bn=function(t,e,n){return e=gn(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=gn(i.length-e,0),a=Array(o);++r<o;)a[r]=i[e+r];r=-1;for(var s=Array(e+1);++r<e;)s[r]=i[r];return s[e]=n(a),yn(t,this,s)}};var mn=function(t){return function(){return t}},xn=pe?function(t,e){return pe(t,"toString",{configurable:!0,enumerable:!1,value:mn(e),writable:!0})}:pn,wn=Date.now;var On=function(t){var e=0,n=0;return function(){var i=wn(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(xn);var Mn=function(t,e){return On(bn(t,e,pn),t+"")};var _n=function(t,e,n){if(!et(n))return!1;var i=typeof e;return!!("number"==i?Ae(n)&&on(e,n.length):"string"==i&&e in n)&&jt(n[e],t)};var Pn=function(t){return Mn((function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,a&&_n(n[0],n[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++i<r;){var s=n[i];s&&t(e,s,i,o)}return e}))}((function(t,e,n){dn(t,e,n)})),kn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0,0,0,0,0];n(this,t),o(this,"tl",new DOMPoint),o(this,"tr",new DOMPoint),o(this,"bl",new DOMPoint),o(this,"br",new DOMPoint),this.tl=new DOMPoint(e[0],e[1]),this.tr=new DOMPoint(e[2],e[3]),this.bl=new DOMPoint(e[4],e[5]),this.br=new DOMPoint(e[6],e[7])}return r(t,[{key:"containsPoint",value:function(t){var e=this.getMinAndMaxPoint(),n=e.minX,i=e.minY,r=e.maxX,o=e.maxY;if(t.x<n||t.x>r||t.y<i||t.y>o)return!1;for(var a,s=0,c=this.getBoundingLines(),u=0;u<c.length;u++){var l=c[u];if(!(t.y>l.o.y&&t.y>l.d.y)&&!(t.y<l.o.y&&t.y<l.d.y)){if(l.o.x===l.d.x&&l.o.x>=t.x)a=l.o.x;else{var h=(l.d.y-l.o.y)/(l.d.x-l.o.x);a=l.o.x+(t.y-l.o.y)/h}a>t.x&&s++}}return 0!==s&&s%2==1}},{key:"getBoundingLines",value:function(){return[{o:DOMPoint.fromPoint(this.tl),d:DOMPoint.fromPoint(this.tr)},{o:DOMPoint.fromPoint(this.tr),d:DOMPoint.fromPoint(this.br)},{o:DOMPoint.fromPoint(this.br),d:DOMPoint.fromPoint(this.bl)},{o:DOMPoint.fromPoint(this.bl),d:DOMPoint.fromPoint(this.tl)}]}},{key:"getMinAndMaxPoint",value:function(){var t=this.tl.x,e=this.tl.y,n=this.tl.x,i=this.tl.y;return[this.tr,this.bl,this.br].forEach((function(r){r.x<t&&(t=r.x),r.x>n&&(n=r.x),r.y<e&&(e=r.y),r.y>i&&(i=r.y)})),{minX:t,minY:e,maxX:n,maxY:i}}},{key:"containsBox",value:function(t){return!1}},{key:"isIntersect",value:function(t){return!1}},{key:"transform",value:function(e){var n=DOMPoint.fromPoint(this.tl).matrixTransform(e),i=DOMPoint.fromPoint(this.tr).matrixTransform(e),r=DOMPoint.fromPoint(this.bl).matrixTransform(e),o=DOMPoint.fromPoint(this.br).matrixTransform(e);return new t([n.x,n.y,i.x,i.y,r.x,r.y,o.x,o.y])}},{key:"union",value:function(t){return null}},{key:"width",get:function(){return Math.abs(this.br.x-this.tl.x)}},{key:"height",get:function(){return Math.abs(this.br.y-this.tl.y)}},{key:"left",get:function(){return this.tl.x},set:function(t){}},{key:"centerX",get:function(){return this.left+this.width/2}},{key:"centerY",get:function(){return this.top+this.height/2}},{key:"centerPoint",get:function(){return new DOMPoint(this.centerX,this.centerY)}},{key:"top",get:function(){return this.tl.y},set:function(t){}}]),t}(),En=function(t){a(s,t);var i=h(s);function s(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(this,s),o(u(t=i.call(this)),"root",null),o(u(t),"ctx",null),o(u(t),"parentNode",null),o(u(t),"isRendering",!1),o(u(t),"props",{id:"ICE_"+Math.floor(1e10*Math.random()),left:0,top:0,width:0,height:0,style:{fillStyle:"red",strokeStyle:"blue",lineWidth:1},animations:{},transform:{translate:[0,0],scale:[1,1],skew:[0,0],rotate:0},translationMatrix:new DOMMatrix,linearMatrix:new DOMMatrix,composedMatrix:new DOMMatrix,origin:new DOMPoint(0,0),zIndex:s.instanceCounter++,draggable:!0,interactive:!0}),o(u(t),"state",e({},t.props)),t.props=Pn(t.props,r),t.state=JSON.parse(JSON.stringify(t.props)),t}return r(s,[{key:"setState",value:function(t){Pn(this.state,t)}},{key:"setPosition",value:function(t,e){this.setState({left:t,top:e})}},{key:"movePosition",value:function(t,e){this.setPosition(this.state.left+t,this.state.top+e)}},{key:"render",value:function(){this.isRendering=!0,this.trigger(N),this.applyStyle(),this.calcOriginalDimension(),this.setLocalOrigin("center"),this.applyTransformToCtx(),this.doRender(),this.ctx.setTransform(new DOMMatrix),this.trigger(A),this.isRendering=!1}},{key:"applyStyle",value:function(){Object.assign(this.ctx,e(e({},this.props.style),this.state.style))}},{key:"calcOriginalDimension",value:function(){return{width:this.state.width,height:this.state.height}}},{key:"setLocalOrigin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"center",e=new DOMPoint,n=this.state.width/2,i=this.state.height/2;if("center"===t&&(e.x=n,e.y=i),this.parentNode){var r=se(this,"state.transform.translate.0")+this.state.left,o=se(this,"state.transform.translate.1")+this.state.top;e.x=this.parentNode.state.origin.x-r,e.y=this.parentNode.state.origin.y-o}this.state.origin=e}},{key:"calcTranslationMatrix",value:function(){var t=new DOMMatrix,e=se(this,"state.transform.translate.0")+this.state.left,n=se(this,"state.transform.translate.1")+this.state.top;return t.translateSelf(e,n),this.state.translationMatrix=t,t}},{key:"calcLinearMatrix",value:function(){var t=new DOMMatrix,e=se(this,"state.transform.skew.0"),n=se(this,"state.transform.skew.1");t.skewXSelf(e),t.skewYSelf(n);var i=se(this,"state.transform.rotate");t.rotateSelf(i);var r=se(this,"state.transform.scale.0"),o=se(this,"state.transform.scale.1");return t.scaleSelf(r,o),this.state.linearMatrix=t,t}},{key:"calcAbsoluteTranslationMatrix",value:function(){for(var t=this,e=DOMMatrix.fromMatrix(t.calcTranslationMatrix());t.parentNode;)e.multiplySelf(t.parentNode.state.translationMatrix),t=t.parentNode;return this.state.absoluteTranslateMatrix=DOMMatrix.fromMatrix(e),e}},{key:"calcAbsoluteLinearMatrix",value:function(){for(var t=this,e=DOMMatrix.fromMatrix(t.calcLinearMatrix());t.parentNode;)e.multiplySelf(t.parentNode.state.linearMatrix),t=t.parentNode;return this.state.absoluteLinearMatrix=DOMMatrix.fromMatrix(e),e}},{key:"composeMatrix",value:function(){var t=this.calcAbsoluteTranslationMatrix(),e=new DOMMatrix([1,0,0,1,this.state.origin.x,this.state.origin.y]);t.multiplySelf(e);var n=this.calcAbsoluteLinearMatrix(),i=t.multiplySelf(n);return this.state.composedMatrix=DOMMatrix.fromMatrix(i),i}},{key:"applyTransformToCtx",value:function(){this.ctx.setTransform(this.composeMatrix())}},{key:"doRender",value:function(){var t=this.getMinBoundingBox();this.ctx.setTransform(new DOMMatrix),this.ctx.lineWidth=1,this.ctx.strokeStyle="#ff0000",this.ctx.fillStyle="rgba(0,0,0,0)",this.ctx.beginPath(),this.ctx.moveTo(t.tl.x,t.tl.y),this.ctx.lineTo(t.tr.x,t.tr.y),this.ctx.lineTo(t.br.x,t.br.y),this.ctx.lineTo(t.bl.x,t.bl.y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill();var e=this.getMaxBoundingBox();this.ctx.setTransform(new DOMMatrix),this.ctx.lineWidth=1,this.ctx.strokeStyle="#0000ff",this.ctx.fillStyle="rgba(0,0,0,0)",this.ctx.beginPath(),this.ctx.moveTo(e.tl.x,e.tl.y),this.ctx.lineTo(e.tr.x,e.tr.y),this.ctx.lineTo(e.br.x,e.br.y),this.ctx.lineTo(e.bl.x,e.bl.y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill()}},{key:"getMinBoundingBox",value:function(){var t=this.state.origin.x,e=this.state.origin.y,n=this.state.width,i=this.state.height,r=new kn([0-t,0-e,n-t,0-e,0-t,i-e,n-t,i-e]);return r=r.transform(this.state.composedMatrix)}},{key:"getMaxBoundingBox",value:function(){var t=this.getMinBoundingBox(),e=t.getMinAndMaxPoint(),n=e.minX,i=e.minY,r=e.maxX,o=e.maxY;return t=new kn([n,i,r,i,n,o,r,o])}},{key:"toJSON",value:function(){return"{}"}},{key:"fromJSON",value:function(t){return{}}}]),s}(W);o(En,"instanceCounter",0);var Dn=function(t){a(i,t);var e=h(i);function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(this,i),o(u(t=e.call(this,r)),"path2D",new Path2D),t}return r(i,[{key:"doRender",value:function(){this.createPathObject(),this.ctx.beginPath(),this.ctx.stroke(this.path2D),this.ctx.fill(this.path2D),v(s(i.prototype),"doRender",this).call(this)}}]),i}(En),jn=function(t){a(o,t);var i=h(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(this,o),i.call(this,e({width:10,height:10},t))}return r(o,[{key:"calcOriginalDots",value:function(){var t=new DOMPoint(0,0),e=new DOMPoint(this.state.width,0),n=new DOMPoint(this.state.width,this.state.height),i=new DOMPoint(0,this.state.height);return this.state.dots=[t,e,n,i],this.state.dots}}]),o}(function(t){a(o,t);var i=h(o);function o(t){return n(this,o),i.call(this,e({dots:[]},t))}return r(o,[{key:"calcOriginalDimension",value:function(){this.calcOriginalDots();var t=this.calc4PointsFromDots(),e=t[1].x-t[0].x,n=t[2].y-t[0].y;return this.state.width=e,this.state.height=n,{width:this.state.width,height:this.state.height}}},{key:"createPathObject",value:function(){this.path2D=new Path2D;for(var t=0;t<this.state.dots.length;t++){var e=this.state.dots[t];0===t?this.path2D.moveTo(e.x,e.y):this.path2D.lineTo(e.x,e.y)}return this.path2D.closePath(),this.path2D}},{key:"calcOriginalDots",value:function(){return this.state.dots=[],this.state.dots}},{key:"setLocalOrigin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"center";v(s(o.prototype),"setLocalOrigin",this).call(this,t);for(var e=0;e<this.state.dots.length;e++){var n=this.state.dots[e];n=n.matrixTransform(new DOMMatrix([1,0,0,1,-this.state.origin.x,-this.state.origin.y])),this.state.dots[e]=n}}},{key:"calc4PointsFromDots",value:function(){for(var t=0,e=0,n=0,i=0,r=0;r<this.state.dots.length;r++){var o=this.state.dots[r];0===r?(t=o.x,n=o.x,e=o.y,i=o.y):(o.x<t&&(t=o.x),o.x>n&&(n=o.x),o.y<e&&(e=o.y),o.y>i&&(i=o.y))}var a=n,s=e,c=t,u=i,l=n,h=i;return[new DOMPoint(t,e),new DOMPoint(a,s),new DOMPoint(c,u),new DOMPoint(l,h)]}}]),o}(Dn)),Sn=function(t){a(i,t);var e=h(i);function i(t){var r;return n(this,i),o(u(r=e.call(this,t)),"parentNode",null),o(u(r),"childNodes",[]),r}return r(i,[{key:"addChild",value:function(t){t.parentNode=this,this.childNodes.push(t)}},{key:"removeChild",value:function(t){t.parentNode=null,t.ctx=null,t.root=null,this.childNodes.splice(this.childNodes.indexOf(t),1)}},{key:"renderChildren",value:function(){var t=this;this.childNodes.forEach((function(e){e.ctx=t.ctx,e.root=t.root,e.render()}))}},{key:"render",value:function(){v(s(i.prototype),"render",this).call(this),this.renderChildren()}}]),i}(jn),Tn=function(t){a(i,t);var e=h(i);function i(t){var r;return n(this,i),(r=e.call(this,t)).handleEvents(),r}return r(i,[{key:"handleEvents",value:function(){var t=this;t.on("after-move",(function(e){var n=t.props.host.state,i=n.origin,r=n.absoluteTranslateMatrix,o=i.matrixTransform(r),a=e.clientX-o.x,s=e.clientY-o.y,c=a/Math.sqrt(a*a+s*s),u=(s/Math.sqrt(a*a+s*s)<0?-1:1)*Math.acos(c)*180/Math.PI+90;t.props.host.setState({transform:{rotate:u}})}))}}]),i}(function(t){a(o,t);var i=h(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(this,o),i.call(this,e({radius:10},t))}return r(o,[{key:"createPathObject",value:function(){return this.path2D=new Path2D,this.path2D.arc(this.state.radius-this.state.origin.x,this.state.radius-this.state.origin.y,this.state.radius,0,2*Math.PI),this.path2D.closePath(),this.path2D}},{key:"calcOriginalDimension",value:function(){return this.state.width=2*this.props.radius,this.state.height=2*this.props.radius,{width:this.state.width,height:this.state.height}}}]),o}(Dn)),Bn=function(t){a(o,t);var i=h(o);function o(t){var r;return n(this,o),(r=i.call(this,e({position:"l"},t))).handleEvents(),r}return r(o,[{key:"handleEvents",value:function(){var t=this;this.on("after-move",(function(e){t.scaleToCenter(e)}))}},{key:"scaleToCenter",value:function(t){var e=t.movementX/window.devicePixelRatio,n=t.movementY/window.devicePixelRatio,i=this.props.host.state,r=i.left,o=i.top,a=i.width,s=i.height,c=this.props.position,u=new DOMPoint(e,n),l=i.absoluteLinearMatrix;switch(l=l.inverse(),e=(u=u.matrixTransform(l)).x,n=u.y,c){case"tl":r+=e,o+=n,a-=2*e,s-=2*n;break;case"l":r+=e,a-=2*e;break;case"lb":r+=e,o-=n,a-=2*e,s+=2*n;break;case"tr":r-=e,o+=n,a+=2*e,s-=2*n;break;case"r":r-=e,a+=2*e;break;case"rb":r-=e,o-=n,a+=2*e,s+=2*n;break;case"t":o+=n,s-=2*n;break;case"b":o-=n,s+=2*n}this.props.host.setState({top:o,left:r,width:Math.abs(a),height:Math.abs(s)})}},{key:"scaleToLeftTop",value:function(t){console.log(this.props.host.state.origin);var e=t.movementX/window.devicePixelRatio,n=t.movementY/window.devicePixelRatio,i=this.props.host.state,r=i.left,o=i.top,a=i.width,s=i.height,c=this.props.position,u=new DOMPoint(e,n),l=this.props.host.calcAbsoluteLinearMatrix();switch(l=l.inverse(),e=(u=u.matrixTransform(l)).x,n=u.y,c){case"tl":o+=n,r+=e;break;case"l":case"lb":r+=e;break;case"t":case"tr":o+=n}var h=c.includes("l")?-1:1,f=c.includes("t")?-1:1;switch(this.props.direction){case"x":a+=h*e;break;case"y":s+=f*n;break;case"both":a+=h*e,s+=f*n}this.props.host.setState({top:o,left:r,width:a,height:s})}},{key:"scaleToLeftBorder",value:function(t){}},{key:"scaleToRightBorder",value:function(t){}},{key:"scaleToPoint",value:function(t){}}]),o}(jn),Cn=function(t){a(i,t);var e=h(i);function i(t){var r;return n(this,i),o(u(r=e.call(this,t)),"scaleHandleInstanceCache",[]),o(u(r),"rotateHandleInstance",void 0),o(u(r),"scaleHandleSize",15),o(u(r),"rotateHandleSize",8),o(u(r),"rotateHandleOffsetY",60),o(u(r),"scaleHandleConfig",[{position:"tl"},{position:"t"},{position:"tr"},{position:"r"},{position:"rb"},{position:"b"},{position:"lb"},{position:"l"}]),r.initTransformationHandles(),r}return r(i,[{key:"initTransformationHandles",value:function(){var t=this;this.scaleHandleInstanceCache=[],this.scaleHandleConfig.forEach((function(e){var n=new Bn({host:t,left:0,top:0,width:t.scaleHandleSize,height:t.scaleHandleSize,style:{strokeStyle:"#8b0000",fillStyle:"#CC3300",lineWidth:1},position:e.position});t.addChild(n),t.scaleHandleInstanceCache.push(n)}));var e=new Tn({host:this,left:0,top:0,radius:this.rotateHandleSize,style:{strokeStyle:"#8b0000",fillStyle:"#CC3300",lineWidth:1}});this.addChild(e),this.rotateHandleInstance=e}},{key:"calcScaleHandlePositions",value:function(){var t=this.state.width,e=this.state.height,n=t/2,i=e/2,r=this.scaleHandleSize/2;return{tl:new DOMPoint(-r,-r),t:new DOMPoint(n-r,-r),tr:new DOMPoint(t-r,-r),r:new DOMPoint(t-r,i-r),rb:new DOMPoint(t-r,e-r),b:new DOMPoint(n-r,e-r),lb:new DOMPoint(-r,e-r),l:new DOMPoint(-r,i-r)}}},{key:"calcRotateHandlePosition",value:function(){var t=this.state.width/2-this.rotateHandleSize,e=-this.rotateHandleOffsetY;return new DOMPoint(t,e)}},{key:"calcHandlePosition",value:function(){var t=this.calcScaleHandlePositions();this.scaleHandleInstanceCache.forEach((function(e){var n=t[e.props.position];e.setState({left:n.x,top:n.y})}));var e=this.calcRotateHandlePosition();this.rotateHandleInstance.setState({left:e.x,top:e.y})}},{key:"renderChildren",value:function(){this.calcHandlePosition(),v(s(i.prototype),"renderChildren",this).call(this)}}]),i}(Sn);let Rn=(new K).init("canvas-1"),Nn=new Cn({left:100,top:100,width:100,height:100,style:{strokeStyle:"#8b0000",fillStyle:"#99FFFF",lineWidth:1}});Rn.addToRenderMap(Nn)}));
